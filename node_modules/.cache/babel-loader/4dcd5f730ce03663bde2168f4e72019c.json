{"ast":null,"code":"var _jsxFileName = \"/home/nhatnt/TN/FEcoffee/src/client/components/app-context/CartProvider.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/React.createContext();\nexport const useCart = () => {\n  _s();\n\n  return React.useContext(CartContext);\n};\n\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nfunction CartProvider({\n  children\n}) {\n  _s2();\n\n  const [cartItems, setCartItems] = React.useState(!localStorage.getItem('starbucks-bag') ? [] : JSON.parse(localStorage.getItem('starbucks-bag')));\n  const [selectedProduct, setSelectedProduct] = React.useState({\n    id: 0,\n    name: ''\n  });\n  const [productAdded, setProductAdded] = React.useState('');\n  const [openTooltip, setOpenTooltip] = React.useState(false);\n\n  const getSelectedProduct = (id, name) => {\n    setSelectedProduct({\n      id: id,\n      name: name\n    });\n  };\n\n  const addCartItems = item => {\n    // console.log(item);\n    const itemCheck = cartItems.find(items => JSON.stringify(items.product) === JSON.stringify(item.product) && JSON.stringify(items.size) === JSON.stringify(item.size) && JSON.stringify(items.note) === JSON.stringify(item.note));\n\n    if (itemCheck) {\n      // itemCheck.quality\n      itemCheck.quantity += item.quantity;\n    } else {\n      setCartItems([...cartItems, { ...item,\n        product: { ...item.product\n        },\n        size: { ...item.size\n        }\n      }]);\n    }\n\n    setProductAdded(item.product.name);\n    console.log(cartItems);\n  };\n\n  const removeCartItem = id => {\n    setCartItems(cartItems.filter(item => item.id !== id));\n  };\n\n  const removeAllCartItems = () => {\n    setCartItems([]);\n  };\n\n  React.useEffect(() => {\n    localStorage.setItem('starbucks-bag', JSON.stringify(cartItems));\n  }, [cartItems]);\n  React.useEffect(() => {\n    if (productAdded === '') {\n      return;\n    }\n\n    setOpenTooltip(true);\n    setTimeout(() => {\n      setOpenTooltip(false);\n      setTimeout(() => {\n        setProductAdded('');\n      }, 200); // wait for Tooltip to disappear, if not waiting, it will render an empty message before setOpenTooltip(false) takes effect\n    }, 2000);\n  }, [productAdded]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartItems,\n      addCartItems,\n      removeCartItem,\n      removeAllCartItems,\n      getSelectedProduct,\n      selectedProduct,\n      productAdded,\n      openTooltip\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 3\n  }, this);\n}\n\n_s2(CartProvider, \"5eRifWuThHfTYd/D73/7RcTk7JU=\");\n\n_c = CartProvider;\nexport default CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"sources":["/home/nhatnt/TN/FEcoffee/src/client/components/app-context/CartProvider.jsx"],"names":["React","CartContext","createContext","useCart","useContext","CartProvider","children","cartItems","setCartItems","useState","localStorage","getItem","JSON","parse","selectedProduct","setSelectedProduct","id","name","productAdded","setProductAdded","openTooltip","setOpenTooltip","getSelectedProduct","addCartItems","item","itemCheck","find","items","stringify","product","size","note","quantity","console","log","removeCartItem","filter","removeAllCartItems","useEffect","setItem","setTimeout"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,WAAW,gBAAGD,KAAK,CAACE,aAAN,EAApB;AAEA,OAAO,MAAMC,OAAO,GAAG;AAAA;;AAAA,SAAMH,KAAK,CAACI,UAAN,CAAiBH,WAAjB,CAAN;AAAA,CAAhB;;GAAME,O;;AAEb,SAASE,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAoC;AAAA;;AACnC,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BR,KAAK,CAACS,QAAN,CAAe,CAACC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAD,GAAyC,EAAzC,GAA8CC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAA7D,CAAlC;AACA,QAAM,CAACG,eAAD,EAAkBC,kBAAlB,IAAwCf,KAAK,CAACS,QAAN,CAAe;AAAEO,IAAAA,EAAE,EAAE,CAAN;AAASC,IAAAA,IAAI,EAAE;AAAf,GAAf,CAA9C;AACA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCnB,KAAK,CAACS,QAAN,CAAe,EAAf,CAAxC;AACA,QAAM,CAACW,WAAD,EAAcC,cAAd,IAAgCrB,KAAK,CAACS,QAAN,CAAe,KAAf,CAAtC;;AAEA,QAAMa,kBAAkB,GAAG,CAACN,EAAD,EAAKC,IAAL,KAAc;AACxCF,IAAAA,kBAAkB,CAAC;AAAEC,MAAAA,EAAE,EAAEA,EAAN;AAAUC,MAAAA,IAAI,EAAEA;AAAhB,KAAD,CAAlB;AACA,GAFD;;AAIA,QAAMM,YAAY,GAAIC,IAAD,IAAU;AAC9B;AACA,UAAMC,SAAS,GAAGlB,SAAS,CAACmB,IAAV,CAAgBC,KAAD,IAAWf,IAAI,CAACgB,SAAL,CAAeD,KAAK,CAACE,OAArB,MAAkCjB,IAAI,CAACgB,SAAL,CAAeJ,IAAI,CAACK,OAApB,CAAlC,IAAkEjB,IAAI,CAACgB,SAAL,CAAeD,KAAK,CAACG,IAArB,MAA+BlB,IAAI,CAACgB,SAAL,CAAeJ,IAAI,CAACM,IAApB,CAAjG,IAA8HlB,IAAI,CAACgB,SAAL,CAAeD,KAAK,CAACI,IAArB,MAA+BnB,IAAI,CAACgB,SAAL,CAAeJ,IAAI,CAACO,IAApB,CAAvL,CAAlB;;AACA,QAAGN,SAAH,EAAa;AACZ;AACAA,MAAAA,SAAS,CAACO,QAAV,IAAoBR,IAAI,CAACQ,QAAzB;AAEA,KAJD,MAIK;AACJxB,MAAAA,YAAY,CAAC,CAAC,GAAGD,SAAJ,EAAe,EAAE,GAAGiB,IAAL;AAAWK,QAAAA,OAAO,EAAE,EAAE,GAAGL,IAAI,CAACK;AAAV,SAApB;AAAyCC,QAAAA,IAAI,EAAE,EAAE,GAAGN,IAAI,CAACM;AAAV;AAA/C,OAAf,CAAD,CAAZ;AACA;;AAEDX,IAAAA,eAAe,CAACK,IAAI,CAACK,OAAL,CAAaZ,IAAd,CAAf;AACAgB,IAAAA,OAAO,CAACC,GAAR,CAAY3B,SAAZ;AACA,GAbD;;AAeA,QAAM4B,cAAc,GAAInB,EAAD,IAAQ;AAC9BR,IAAAA,YAAY,CAACD,SAAS,CAAC6B,MAAV,CAAkBZ,IAAD,IAAUA,IAAI,CAACR,EAAL,KAAYA,EAAvC,CAAD,CAAZ;AACA,GAFD;;AAIA,QAAMqB,kBAAkB,GAAG,MAAM;AAChC7B,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACA,GAFD;;AAIAR,EAAAA,KAAK,CAACsC,SAAN,CAAgB,MAAM;AACrB5B,IAAAA,YAAY,CAAC6B,OAAb,CAAqB,eAArB,EAAsC3B,IAAI,CAACgB,SAAL,CAAerB,SAAf,CAAtC;AACA,GAFD,EAEG,CAACA,SAAD,CAFH;AAIAP,EAAAA,KAAK,CAACsC,SAAN,CAAgB,MAAM;AACrB,QAAIpB,YAAY,KAAK,EAArB,EAAyB;AACxB;AACA;;AACDG,IAAAA,cAAc,CAAC,IAAD,CAAd;AACAmB,IAAAA,UAAU,CAAC,MAAM;AAChBnB,MAAAA,cAAc,CAAC,KAAD,CAAd;AACAmB,MAAAA,UAAU,CAAC,MAAM;AAChBrB,QAAAA,eAAe,CAAC,EAAD,CAAf;AACA,OAFS,EAEP,GAFO,CAAV,CAFgB,CAIP;AACT,KALS,EAKP,IALO,CAAV;AAMA,GAXD,EAWG,CAACD,YAAD,CAXH;AAaA,sBACC,QAAC,WAAD,CAAa,QAAb;AACC,IAAA,KAAK,EAAE;AACNX,MAAAA,SADM;AAENgB,MAAAA,YAFM;AAGNY,MAAAA,cAHM;AAINE,MAAAA,kBAJM;AAKNf,MAAAA,kBALM;AAMNR,MAAAA,eANM;AAONI,MAAAA,YAPM;AAQNE,MAAAA;AARM,KADR;AAAA,cAYEd;AAZF;AAAA;AAAA;AAAA;AAAA,UADD;AAgBA;;IAlEQD,Y;;KAAAA,Y;AAoET,eAAeA,YAAf","sourcesContent":["import React from 'react';\n\nconst CartContext = React.createContext();\n\nexport const useCart = () => React.useContext(CartContext);\n\nfunction CartProvider({ children }) {\n\tconst [cartItems, setCartItems] = React.useState(!localStorage.getItem('starbucks-bag') ? [] : JSON.parse(localStorage.getItem('starbucks-bag')));\n\tconst [selectedProduct, setSelectedProduct] = React.useState({ id: 0, name: '' });\n\tconst [productAdded, setProductAdded] = React.useState('');\n\tconst [openTooltip, setOpenTooltip] = React.useState(false);\n\n\tconst getSelectedProduct = (id, name) => {\n\t\tsetSelectedProduct({ id: id, name: name });\n\t};\n\n\tconst addCartItems = (item) => {\n\t\t// console.log(item);\n\t\tconst itemCheck = cartItems.find((items) => JSON.stringify(items.product) === JSON.stringify(item.product) && JSON.stringify(items.size) === JSON.stringify(item.size) && JSON.stringify(items.note) === JSON.stringify(item.note))\n\t\tif(itemCheck){\n\t\t\t// itemCheck.quality\n\t\t\titemCheck.quantity+=item.quantity;\n\t\t\t\n\t\t}else{\n\t\t\tsetCartItems([...cartItems, { ...item, product: { ...item.product }, size: { ...item.size } }]);\n\t\t}\n\t\t\n\t\tsetProductAdded(item.product.name);\n\t\tconsole.log(cartItems)\n\t};\n\n\tconst removeCartItem = (id) => {\n\t\tsetCartItems(cartItems.filter((item) => item.id !== id));\n\t};\n\n\tconst removeAllCartItems = () => {\n\t\tsetCartItems([]);\n\t};\n\n\tReact.useEffect(() => {\n\t\tlocalStorage.setItem('starbucks-bag', JSON.stringify(cartItems));\n\t}, [cartItems]);\n\n\tReact.useEffect(() => {\n\t\tif (productAdded === '') {\n\t\t\treturn;\n\t\t}\n\t\tsetOpenTooltip(true);\n\t\tsetTimeout(() => {\n\t\t\tsetOpenTooltip(false);\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetProductAdded('');\n\t\t\t}, 200); // wait for Tooltip to disappear, if not waiting, it will render an empty message before setOpenTooltip(false) takes effect\n\t\t}, 2000);\n\t}, [productAdded]);\n\n\treturn (\n\t\t<CartContext.Provider\n\t\t\tvalue={{\n\t\t\t\tcartItems,\n\t\t\t\taddCartItems,\n\t\t\t\tremoveCartItem,\n\t\t\t\tremoveAllCartItems,\n\t\t\t\tgetSelectedProduct,\n\t\t\t\tselectedProduct,\n\t\t\t\tproductAdded,\n\t\t\t\topenTooltip,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</CartContext.Provider>\n\t);\n}\n\nexport default CartProvider;\n"]},"metadata":{},"sourceType":"module"}